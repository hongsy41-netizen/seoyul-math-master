<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í…œí”Œë¦¿ í†µê³„ í™•ì¸</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
        .missing { background-color: #ffcccc; }
        .low { background-color: #ffffcc; }
        .good { background-color: #ccffcc; }
    </style>
</head>
<body>
    <h1>ğŸ“Š ë‹¨ì›ë³„ ë¬¸ì œ í…œí”Œë¦¿ í†µê³„</h1>
    <div id="stats"></div>
    <div id="details"></div>

    <script src="/js/generator/core.js"></script>
    <script src="/js/generator/templates_1_1.js"></script>
    <script src="/js/generator/templates_1_2.js"></script>
    <script src="/js/generator/generate.js"></script>

    <script>
        const syllabus = {
            "m1-1-1-I-1": "ì†Œì¸ìˆ˜ë¶„í•´",
            "m1-1-1-I-2": "ìµœëŒ€ê³µì•½ìˆ˜ì™€ ìµœì†Œê³µë°°ìˆ˜",
            "m1-1-1-II-1": "ì •ìˆ˜ì™€ ìœ ë¦¬ìˆ˜",
            "m1-1-1-II-2": "ì •ìˆ˜ì™€ ìœ ë¦¬ìˆ˜ì˜ ê³„ì‚°",
            "m1-1-1-III-1": "ë¬¸ìì˜ ì‚¬ìš©ê³¼ ì‹",
            "m1-1-1-III-2": "ì¼ì°¨ì‹ì˜ ê³„ì‚°",
            "m1-1-1-III-3": "ë°©ì •ì‹ê³¼ ê·¸ í•´",
            "m1-1-1-III-4": "ì¼ì°¨ë°©ì •ì‹ì˜ í’€ì´",
            "m1-1-1-III-5": "ì¼ì°¨ë°©ì •ì‹ì˜ í™œìš©",
            "m1-1-2-I-1": "ê¸°ë³¸ ë„í˜•",
            "m1-1-2-I-2": "ìœ„ì¹˜ ê´€ê³„",
            "m1-1-2-I-3": "ì‘ë„ì™€ í•©ë™",
            "m1-1-2-II-1": "ë‹¤ê°í˜•",
            "m1-1-2-II-2": "ì›ê³¼ ë¶€ì±„ê¼´",
            "m1-1-2-III-1": "ë‹¤ë©´ì²´ì™€ íšŒì „ì²´",
            "m1-1-2-III-2": "ì…ì²´ë„í˜•ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼"
        };

        const allTemplates = Generator.allTemplates();
        const stats = {};

        // í†µê³„ ìˆ˜ì§‘
        Object.keys(syllabus).forEach(unitId => {
            stats[unitId] = {
                title: syllabus[unitId],
                1: 0, 2: 0, 3: 0,
                total: 0
            };
        });

        allTemplates.forEach(tpl => {
            if (stats[tpl.unitId]) {
                stats[tpl.unitId][tpl.difficulty]++;
                stats[tpl.unitId].total++;
            }
        });

        // í†µê³„ í‘œì‹œ
        let html = '<h2>ğŸ“ˆ ìš”ì•½ í†µê³„</h2>';
        html += '<table>';
        html += '<tr><th>ë‹¨ì› ID</th><th>ë‹¨ì›ëª…</th><th>ë‚œì´ë„ 1</th><th>ë‚œì´ë„ 2</th><th>ë‚œì´ë„ 3</th><th>ì´ê³„</th></tr>';

        let totalMissing = 0;
        Object.keys(stats).forEach(unitId => {
            const s = stats[unitId];
            const missing3 = s[3] === 0;
            const low = s.total < 3;
            const rowClass = missing3 ? 'missing' : (low ? 'low' : 'good');
            
            if (missing3) totalMissing++;
            
            html += `<tr class="${rowClass}">`;
            html += `<td>${unitId}</td>`;
            html += `<td>${s.title}</td>`;
            html += `<td>${s[1]}</td>`;
            html += `<td>${s[2]}</td>`;
            html += `<td style="font-weight: bold;">${s[3]}</td>`;
            html += `<td><strong>${s.total}</strong></td>`;
            html += '</tr>';
        });

        html += '</table>';
        html += `<p><strong>ë‚œì´ë„ 3 ë¬¸ì œê°€ ì—†ëŠ” ë‹¨ì›: ${totalMissing}ê°œ</strong></p>`;
        html += '<p>ğŸ”´ ë¹¨ê°„ìƒ‰: ë‚œì´ë„ 3 ë¬¸ì œ ì—†ìŒ | ğŸŸ¡ ë…¸ë€ìƒ‰: ì´ ë¬¸ì œ 3ê°œ ë¯¸ë§Œ | ğŸŸ¢ ì´ˆë¡ìƒ‰: ì–‘í˜¸</p>';

        document.getElementById('stats').innerHTML = html;

        // ìƒì„¸ í…œí”Œë¦¿ ëª©ë¡
        let detailHtml = '<h2>ğŸ“ ìƒì„¸ í…œí”Œë¦¿ ëª©ë¡</h2>';
        Object.keys(stats).forEach(unitId => {
            const s = stats[unitId];
            detailHtml += `<h3>${unitId}: ${s.title} (ì´ ${s.total}ê°œ)</h3>`;
            const templates = allTemplates.filter(t => t.unitId === unitId);
            if (templates.length === 0) {
                detailHtml += '<p style="color: red;">âŒ í…œí”Œë¦¿ ì—†ìŒ</p>';
            } else {
                detailHtml += '<ul>';
                templates.forEach(t => {
                    detailHtml += `<li>[ë‚œì´ë„ ${t.difficulty}] ${t.key} - ${t.tags.join(', ')}</li>`;
                });
                detailHtml += '</ul>';
            }
        });

        document.getElementById('details').innerHTML = detailHtml;
    </script>
</body>
</html>
