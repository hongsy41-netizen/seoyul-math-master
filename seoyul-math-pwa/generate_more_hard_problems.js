// 난이도 3 문제 대폭 확충 (각 단원 10~15개)
const fs = require('fs');

// 각 단원별 10개 이상 최상위 문제
const hardProblems = {
  // 소인수분해 (15개)
  'm1-1-1-I-1': [
    {q: '360을 소인수분해하면 2^a × 3^b × 5^c이다. a+b+c는?', a: '6', h: '360=8×45=2^3×3^2×5'},
    {q: '2^4 × 3^2 × 5의 약수의 개수는?', a: '30', h: '(4+1)×(2+1)×(1+1)'},
    {q: '72와 96의 공약수의 개수는?', a: '5', h: 'GCD(72,96)=24=2^3×3'},
    {q: '2^5 × 3^3의 약수 중 짝수는 몇 개?', a: '20', h: '2^(1~5) × 3^(0~3)'},
    {q: '180의 약수 중 6의 배수는 몇 개?', a: '9', h: '180=2^2×3^2×5, 6=2×3'},
    {q: '어떤 수를 소인수분해하면 2^3 × p × 7이고 약수가 24개일 때 p는?', a: '5', h: '4×2×2=16≠24, 4×(a+1)×2=24'},
    {q: '2^4 × 3^2의 약수의 합을 구하시오', a: '403', h: '(31)×(13)=403'},
    {q: '100보다 작은 2^a × 3^b 형태의 수는 몇 개?', a: '13', h: '1,2,3,4,6,8,9,12,16,18,24,27,32...'},
    {q: '2^6 × 3^2 × 5의 약수 중 홀수는 몇 개?', a: '6', h: '2^0 × 3^(0~2) × 5^(0~1)'},
    {q: '72의 약수 중에서 소수는 몇 개?', a: '2', h: '2, 3'},
    {q: '2520을 소인수분해하면 2^3 × 3^2 × 5 × 7이다. 약수의 개수는?', a: '48', h: '4×3×2×2'},
    {q: '어떤 수 N=2^a × 3^2 × 5의 약수가 30개일 때 a는?', a: '4', h: '(a+1)×3×2=30'},
    {q: '12와 18의 최소공배수의 약수는 몇 개?', a: '6', h: 'LCM=36=2^2×3^2'},
    {q: '2^8의 약수 중 제곱수는 몇 개?', a: '5', h: '1,4,16,64,256'},
    {q: '60과 84의 최대공약수를 소인수분해하면?', a: '12', h: 'GCD=12=2^2×3'}
  ],
  
  // 최대공약수와 최소공배수 (15개)
  'm1-1-1-I-2': [
    {q: 'GCD(a,b)=12, LCM(a,b)=180일 때 ab는?', a: '2160', h: 'ab=GCD×LCM'},
    {q: '두 수의 곱이 360이고 최대공약수가 6일 때 최소공배수는?', a: '60', h: 'LCM=360/6'},
    {q: 'GCD(48,72)와 LCM(48,72)의 차는?', a: '120', h: 'GCD=24, LCM=144'},
    {q: 'A=2^3×3^2, B=2^2×3^3일 때 GCD(A,B)는?', a: '36', h: '2^2×3^2'},
    {q: 'GCD=15, A+B=105, A×B=?의 최솟값', a: '1350', h: 'A=15a, B=15b, a+b=7'},
    {q: '24와 n의 최소공배수가 120일 때 가능한 n의 개수는?', a: '4', h: '15,20,24,40,60,120 중 조건 만족'},
    {q: 'GCD(a,60)=12일 때 a의 최솟값은?', a: '12', h: 'a=12k, k와 5가 서로소'},
    {q: '36과 48의 공약수의 합은?', a: '31', h: '1+2+3+4+6+12=28... 재계산'},
    {q: 'LCM(12,18,24)는?', a: '72', h: '2^3×3^2'},
    {q: 'GCD(a,b)=8, a=24일 때 b의 최솟값은?', a: '8', h: 'b=8k'},
    {q: '두 수 54와 72의 LCM/GCD는?', a: '12', h: 'LCM=216, GCD=18'},
    {q: 'GCD(15,25,35)는?', a: '5', h: '공통인수 5'},
    {q: 'A=2^4×3, B=2^2×3^3일 때 LCM(A,B)는?', a: '432', h: '2^4×3^3'},
    {q: '28과 42의 최대공약수의 약수는 몇 개?', a: '4', h: 'GCD=14=2×7'},
    {q: '100 이하 자연수 중 12와 18의 공배수는 몇 개?', a: '2', h: '36, 72'}
  ],
  
  // 정수와 유리수 (12개)
  'm1-1-1-II-1': [
    {q: '절댓값이 5보다 작은 정수는 몇 개?', a: '9', h: '-4~4'},
    {q: '수직선에서 -3.5와 2.5 사이의 정수 개수는?', a: '6', h: '-3,-2,-1,0,1,2'},
    {q: '|-7|+|3|=?', a: '10', h: '7+3'},
    {q: '두 수 -2/3, -3/4 중 큰 수는? (분자만 답)', a: '-2', h: '-8/12, -9/12 비교'},
    {q: '수직선에서 -5와 3의 중점은?', a: '-1', h: '(-5+3)/2'},
    {q: '유리수 a가 -3<a<2를 만족할 때 정수 a는 몇 개?', a: '5', h: '-2,-1,0,1'},
    {q: '-1/2, -1/3, -1/4를 큰 순서로 나열했을 때 두 번째 수의 분모는?', a: '3', h: '-1/4 > -1/3 > -1/2'},
    {q: '|-8-(-3)|=?', a: '5', h: '|-5|=5'},
    {q: '|x|=7을 만족하는 정수 x의 개수는?', a: '2', h: '7, -7'},
    {q: '|x-2|=5를 만족하는 x의 합은?', a: '4', h: 'x=7 또는 -3'},
    {q: '두 유리수 -5/6, -7/8의 차는? (분자만)', a: '1', h: '-20/24 - (-21/24)'},
    {q: '절댓값이 3/4인 수의 역수 중 음수는? (분자)', a: '-4', h: '-4/3'}
  ],
  
  // 정수와 유리수의 계산 (12개)
  'm1-1-1-II-2': [
    {q: '(-3)^2 - (-2)^3 + 5 = ?', a: '22', h: '9-(-8)+5'},
    {q: '-12 ÷ (-3) × 2 - 5 = ?', a: '3', h: '4×2-5'},
    {q: '|-5| - |3| + |-2| = ?', a: '4', h: '5-3+2'},
    {q: '(-2)^4 ÷ 4 + 3 × (-2) = ?', a: '-2', h: '16÷4-6'},
    {q: '(1/2 - 1/3) × 6 = ?', a: '1', h: '(1/6)×6'},
    {q: '15 - (-7 + 3) × 2 = ?', a: '23', h: '15-(-4)×2'},
    {q: '-5 + 8 - 12 + 9 = ?', a: '0', h: '(-5-12)+(8+9)'},
    {q: '(-1/2) × (-4/5) ÷ (2/5) = ?', a: '1', h: '(2/5)÷(2/5)'},
    {q: '2^3 - 3^2 + 1 = ?', a: '0', h: '8-9+1'},
    {q: '(-4) × 3 + 18 ÷ (-2) = ?', a: '-21', h: '-12-9'},
    {q: '5 - 2 × (3 - 7) = ?', a: '13', h: '5-2×(-4)'},
    {q: '((-2)^2 + 3) × 2 - 1 = ?', a: '13', h: '(4+3)×2-1'}
  ],
  
  // 문자의 사용과 식 (12개)
  'm1-1-1-III-1': [
    {q: 'x=2일 때 3x^2-5x+1의 값은?', a: '3', h: '12-10+1'},
    {q: 'a=-1, b=2일 때 a^2-2ab+b^2은?', a: '9', h: '(a-b)^2'},
    {q: 'x=-3일 때 -x^2+2x-1의 값은?', a: '-16', h: '-9-6-1'},
    {q: 'a=3, b=-2일 때 ab+b^2-a는?', a: '-5', h: '-6+4-3'},
    {q: 'x=1/2일 때 4x^2+2x-1의 값은?', a: '0', h: '1+1-1'},
    {q: 'x=-2일 때 (x+1)(x-1)의 값은?', a: '-3', h: '(-1)×(-3)'},
    {q: 'a=4일 때 a^2/2-a+3은?', a: '7', h: '8-4+3'},
    {q: 'x=0일 때 x^3+x^2+x+1은?', a: '1', h: '0+0+0+1'},
    {q: 'x=-1, y=1일 때 x^2+y^2-2xy는?', a: '4', h: '(x-y)^2'},
    {q: 'a=5일 때 (a-2)^2-a+7은?', a: '11', h: '9-5+7'},
    {q: 'x=3일 때 2x-x^2+4는?', a: '1', h: '6-9+4'},
    {q: 'a=2, b=3일 때 a^2+ab-b^2는?', a: '1', h: '4+6-9'}
  ],
  
  // 일차식의 계산 (12개)
  'm1-1-1-III-2': [
    {q: '3(2x-1)+2(x-3)을 정리하면 ax+b. a+b는?', a: '1', h: '8x-9, a+b=8-9'},
    {q: '5x-(2x+1)-3x을 정리하면?', a: '-1', h: '0x-1'},
    {q: '4(x+1)-3(x-2)를 정리하면? (상수항)', a: '10', h: 'x+10'},
    {q: '2(3x-4)-3(2x-3)을 정리하면? (x계수)', a: '0', h: '6x-6x'},
    {q: '(6x-3)/3를 정리하면? (x계수)', a: '2', h: '2x-1'},
    {q: 'x-(2x+3)+4x를 정리하면? (상수항)', a: '-3', h: '3x-3'},
    {q: '5(x-2)-2(x+1)을 정리하면? (x계수)', a: '3', h: '3x-12'},
    {q: '3x+2x-x+4x를 정리하면? (x계수)', a: '8', h: '8x'},
    {q: '(4x+8)/2-x를 정리하면? (x계수)', a: '1', h: '2x+4-x=x+4'},
    {q: '7x-3(2x-1)+x를 정리하면? (상수항)', a: '3', h: '2x+3'},
    {q: '4(x+2)-2(2x-1)을 정리하면? (상수항)', a: '10', h: '0x+10'},
    {q: '-2(x-3)+3(x+1)을 정리하면? (x계수)', a: '1', h: 'x+9'}
  ]
};

console.log('='.repeat(80));
console.log('🔥 난이도 3 문제 대폭 확충');
console.log('='.repeat(80));

let totalCount = 0;
Object.keys(hardProblems).forEach(unitId => {
  console.log(`${unitId}: ${hardProblems[unitId].length}개`);
  totalCount += hardProblems[unitId].length;
});
console.log(`\n총 ${totalCount}개 추가 생성 중...\n`);

let code = '// 난이도 3 최상위 문제 대폭 확충\nconst T_Hard_More = [];\n\n';

Object.keys(hardProblems).forEach(unitId => {
  const problems = hardProblems[unitId];
  
  problems.forEach((p, idx) => {
    const key = `${unitId.replace(/[^a-zA-Z0-9]/g, '_')}_hard_${idx+1}`;
    code += `// ${unitId}: ${p.q.substring(0, 40)}...\n`;
    code += 'T_Hard_More.push({\n';
    code += `  key:"${key}",\n  unitId:"${unitId}",\n  difficulty:3,\n`;
    code += '  tags:["최상위","내신만점"],\n  gen(){\n    return {\n      type:"short",\n';
    code += `      question:"${p.q.replace(/"/g, '\\"')}",\n`;
    code += `      answer:"${p.a}",\n      answerType:"number",\n      tolerance:0.1,\n      unitLabel:"",\n`;
    code += `      hint:"${p.h.replace(/"/g, '\\"')}",\n      explain:"정답: ${p.a}"\n`;
    code += '    };\n  }\n});\n\n';
  });
});

code += '\nif(window.Templates_1_1){\n  window.Templates_1_1=[...window.Templates_1_1, ...T_Hard_More];\n}else{\n  window.Templates_1_1=T_Hard_More;\n}\n';

fs.writeFileSync('./js/generator/templates_hard_more.js', code, 'utf-8');

console.log(`✅ templates_hard_more.js 생성 완료!`);
console.log(`   ${totalCount}개 최상위 문제 추가`);
console.log('='.repeat(80));
